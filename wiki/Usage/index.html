<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head> 
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Site Properities -->
    <title>Usage | nAdoni</title>
    <meta name="description" content="nAdoni is a library that provides a way to check for updates to one or more binaries via an update manifest, and then to download an archive containing the updated binaries." />
    <meta name="keywords" content="nAdoni, updates, next version" />
    <meta name="author" content="Petrik van der Velde" />

    <!-- DocPad Meta -->
    <meta name="generator" content="DocPad v6.57.3" />

    <!-- DocPad Styles + Our Own -->
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link  rel="stylesheet" href="/styles/stylesheet.css" /><link  rel="stylesheet" href="/styles/pygment_trac.css" />
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->
    
    <div id="header">
        <div class="inner">
            <h1><a href="/">nAdoni</a></h1>
            <h2>nAdoni is a library that provides a way to check for updates to one or more binaries via an update manifest, and then to download an archive containing the updated binaries.</h2>
            <a href="https://github.com/pvandervelde/nAdoni" class="button"><small>View project on</small>GitHub</a>
            <nav id="header-nav">
                <ul>
                    
                        <li class="inactive">
                            
                                <a href="/index.html">Home</a>
                            
                        </li>
                    
                </ul>
            </nav>
        </div>
    </div>
    
    <div id="content-wrapper">
        <div class="inner clearfix">
            <div id="sidebar">
                <div id="sbox1">
                    <h2 id="links">Links</h2>
<ul>
<li><a href="/wiki/Usage">Usage</a></li>
<li><a href="/wiki/Building">Building</a></li>
<li><a href="/wiki/Contributing">Contributing</a></li>
<li><a href="https://github.com/pvandervelde/nAdoni/releases/latest">Download</a></li>
<li><a href="http://opensource.org/licenses/MS-PL">License</a></li>
</ul>

                </div>
                <div id="sbox2">
                    <h2>Recent</h2>
                    <ul>
                        
                            <li><a href="/posts/2014-05-21_New-website.html">New website design!</a></li>
                        
                    </ul>
                </div>
                <div id="sbox3">
                    <h2>Tags</h2>
                    
                        <a href="/tags/Website.html" style="font-size: NaN%">
                            Website
                        </a>
                    
                </div>
            </div>
            <div id="main-content">
                <h1>Usage</h1>
<p>In order to use the nAdoni library there are two distinct steps that must be taken. First the manifest file must be created and second the software must be changed to handle the update process.</p>
<h3 id="create-a-key-file">Create a key file</h3>
<p>In order to create the manifest files a RSA key is needed. The complete RSA key needs to be provided to both the manifest generator and the public part of the RSA key needs to be provided when the manifest is parsed.</p>
<p>A RSA private key file contains the following information:</p>
<pre class="highlight"><code class="hljs xml">``` xml
<span class="hljs-tag">&lt;<span class="hljs-title">RSAKeyValue</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Modulus</span>&gt;</span>MODULUS_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">Modulus</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Exponent</span>&gt;</span>EXPONENT_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">Exponent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">P</span>&gt;</span>P_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">P</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Q</span>&gt;</span>Q_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">Q</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DP</span>&gt;</span>DP_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">DP</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DQ</span>&gt;</span>DQ_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">DQ</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">InverseQ</span>&gt;</span>INVERSE_Q_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">InverseQ</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">D</span>&gt;</span>D_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">D</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">RSAKeyValue</span>&gt;</span>
```
</code></pre><p>A RSA public key file contains the following information:</p>
<pre class="highlight"><code class="hljs xml">``` xml
<span class="hljs-tag">&lt;<span class="hljs-title">RSAKeyValue</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Modulus</span>&gt;</span>MODULUS_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">Modulus</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Exponent</span>&gt;</span>EXPONENT_VALUE_HERE<span class="hljs-tag">&lt;/<span class="hljs-title">Exponent</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">RSAKeyValue</span>&gt;</span>
```
</code></pre><p>These kinds of files can be written with the <code>nAdoni.KeyGenerator</code> executable by executing the following command line:</p>
<pre class="highlight"><code class="hljs lasso">nAdoni<span class="hljs-built_in">.</span>KeyGenerator<span class="hljs-built_in">.</span>exe <span class="hljs-subst">--</span><span class="hljs-keyword">private</span><span class="hljs-subst">=&lt;</span>FILE<span class="hljs-attribute">-PATH</span><span class="hljs-attribute">-PRIVATE</span><span class="hljs-attribute">-OUTPUT</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span><span class="hljs-keyword">public</span><span class="hljs-subst">=&lt;</span>FILE<span class="hljs-attribute">-PATH</span><span class="hljs-attribute">-PUBLIC</span><span class="hljs-attribute">-OUTPUT</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>keysize<span class="hljs-subst">=&lt;</span>KEYSIZE<span class="hljs-subst">&gt;</span>
</code></pre><p>Where:</p>
<ul>
<li><strong>FILE-PATH-PRIVATE-OUTPUT</strong> - The full path to the XML file that contains the public and private parts of the key.</li>
<li><strong>FILE-PATH-PUBLIC-OUTPUT</strong> - The full path to the XML file that contains only the public part of the key.</li>
<li><strong>KEYSIZE</strong> - The size of the key, defaults to 2048 bits.</li>
</ul>
<h3 id="create-a-manifest-file-">Create a manifest file:</h3>
<ul>
<li>Create an archive file that contains all the files that should be part of the update.</li>
<li><p>Get the <code>nAdoni.ManifestBuilder</code> executable and execute the following command line:</p>
<pre class="highlight"><code class="hljs lasso">  nAdoni<span class="hljs-built_in">.</span>ManifestBuilder<span class="hljs-built_in">.</span>exe <span class="hljs-subst">--</span>ProductName<span class="hljs-subst">=&lt;</span>PRODUCT<span class="hljs-attribute">-NAME</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>ProductVersion<span class="hljs-subst">=&lt;</span>PRODUCT<span class="hljs-attribute">-VERSION</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>FilePath<span class="hljs-subst">=&lt;</span>FILE<span class="hljs-attribute">-PATH</span><span class="hljs-attribute">-TO</span><span class="hljs-attribute">-ARCHIVE</span><span class="hljs-attribute">-FILE</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>DownloadUrl<span class="hljs-subst">=&lt;</span>URL<span class="hljs-attribute">-TO</span><span class="hljs-attribute">-ARCHIVE</span><span class="hljs-attribute">-FILE</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>KeyFile<span class="hljs-subst">=&lt;</span>SIGNING<span class="hljs-attribute">-FILE</span><span class="hljs-attribute">-PATH</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>KeyContainerName<span class="hljs-subst">=&lt;</span>SIGNING<span class="hljs-attribute">-KEY</span><span class="hljs-attribute">-CONTAINER</span><span class="hljs-attribute">-NAME</span><span class="hljs-subst">&gt;</span> <span class="hljs-subst">--</span>Output<span class="hljs-subst">=&lt;</span>OUTPUT<span class="hljs-attribute">-PATH</span><span class="hljs-subst">&gt;</span>
</code></pre><p>  Where</p>
<ul>
<li><strong>PRODUCT-NAME</strong> - The name of the product that should be updated. This name is not directly used in finding new updates but may be used for display purposes in the application that is checking for updates.</li>
<li><strong>PRODUCT-VERSION</strong> - The version of the product that is contained in the archive file. An application looking for updates will compare their version number with this one in order to determine if it should update or not.</li>
<li><strong>FILE-PATH-TO-ARCHIVE-FILE</strong> - The full path to the archive file, at the moment the manifest file is being created. This path is used to load the archive file and calculate the hash.</li>
<li><strong>URL-TO-ARCHIVE-FILE</strong> - The URL from which the archive can be downloaded. </li>
<li><strong>SIGNING-FILE-PATH</strong> - The full path to the RSA private key file with which the manifest file should be signed. This parameter does not need to be provided if a key container name is provided.</li>
<li><strong>SIGNING-KEY-CONTAINER-NAME</strong> - The name of the key container that contains the private key with which the manifest file should be signed. This parameter does not need to be provided if a key file path is provided.</li>
<li><strong>OUTPUT-PATH</strong> - The full path to the location where the output file should be placed.</li>
</ul>
</li>
</ul>
<h3 id="in-the-application">In the application</h3>
<pre class="highlight"><code class="hljs coffeescript">`<span class="javascript"></span>``<span class="javascript"> c#

<span class="hljs-keyword">var</span> updater = <span class="hljs-keyword">new</span> NAdoni.Updater();

<span class="hljs-comment">// Check for updates</span>
<span class="hljs-keyword">var</span> info = updater.MostRecentUpdateOnRemoteServer(manifestUri, publicKeyXml, currentVersion);

<span class="hljs-keyword">if</span> (info.UpdateIsAvailableAndValid)
{
    <span class="hljs-keyword">var</span> task = updater.StartDownloadAsync(info);
    task.Wait();

    <span class="hljs-keyword">var</span> fileInfo = task.Result;

    <span class="hljs-comment">// Now you have a FileInfo object with the path to your archive file</span>
}

</span>``<span class="javascript"></span>`
</code></pre>
            </div>
        </div>
    </div>
    <div id="footer" class="container">
        <div class="inner">
            <div id="fbox1">
                <h2>Related</h2>

<ul>
    <li id="first"><a href="https://github.com/pvandervelde/nAdoni">GitHub</a></li>
</ul>
            </div>
            <div id="fbox2">
                <h2 id="copyright">Copyright</h2>
<p>These pages are licensed with the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative Commons Attribution-ShareAlike 4.0 International Public License</a></p>
<h2 id="disclaimer">Disclaimer</h2>
<p>The opinions expressed herein are my own personal opinions and do not represent my employer&#39;s view in any way.</p>

            </div>
            <div id="fbox3">
                <h2 id="media">Media</h2>
<p><a href="/atom.xml"><img src="/images/feed.png" alt="Atom feed"></a></p>

            </div>
        </div>
    </div>
    <div id="copyright" class="container">
        <div class="inner">
            <p>
                Site design based on the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
            </p>
            <p>Generated by <a href="http://docpad.org/" rel="nofollow">DocPad</a> on Wednesday, May 21, 2014.</p>
        </div>
    </div>

    <!-- jQuery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/vendor/jquery.js"><\/script>')</script>

    <!-- DocPad Scripts + Our Own -->
    <script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-xxxxxxxx-x');
ga('send', 'pageview');</script><script defer="defer"  src="/scripts/main.js"></script>
</body>
</html>